# From Ring to $\sigma$-Algebra: Carathéodory's Theorem 


As mentioned in the previous section, the question is whether a $\sigma$-additive pre-measure on a ring $\mathcal{R}$ can be extended to the $\sigma$-algebra it generates.
In case such an extension exists, a further relevant question is whether such an extension is unique.

Before assessing the extension, we first address some central properties of the $\sigma$-additivity in terms of continuity.

!!! lemma

    Let $\mathcal{R}$ be a ring and $\mu:\mathcal{R}\to [0,\infty]$ a finite content, that is $\mu[A]<\infty$ for every $A \in \mathcal{R}$.
    Then the following properties of $\mu$ hold:

    1. **$\sigma$-additivity**
    2. **$\sigma$-sub-additivity**
    3. **Lower semi-continuity:** $\sup_n \mu[A_n]= \mu[\cup A_n]$ for every countable family $(A_n)$ of increasing elements in $\mathcal{R}$ such that $\cup A_n$ is in $\mathcal{R}$.
    4. **Upper semi-continuity:** $\inf_n \mu[A_n]= \mu[\cap A_n]$ for every countable family $(A_n)$ of decreasing elements in $\mathcal{R}$ such that $\cap A_n$ is in $\mathcal{R}$.
    5. **Continuous at $\emptyset$:** $\inf_n \mu[A_n]= 0$ for every countable family $(A_n)$ of decreasing elements in $\mathcal{R}$ such that $\cap A_n=\emptyset$.

!!! proof "Proof"
    - The equivalence between **$\sigma$-additivity** and **$\sigma$-sub-additivity** is already shown in a previous [Lemma](022-semi-ring-to-ring.md#lem-propcontentsemiring) in the context of a semi-ring.
    - **$\sigma$-additivity implies lower semi-continuity:**
        Let $(A_n)$ be an increasing sequence of elements in $\mathcal{R}$ such that $A=\cup A_n$ is in $\mathcal{R}$.  
        Defining $B_n=A_n\setminus \cup_{k<n}A_k=A_n\setminus B_{n-1}$ for $n>1$ and $B_1=A_1$ provides a disjoint sequence of elements in $\mathcal{R}$.  
        Since $A_n=\cup_{1\leq k\leq n} B_k$ and $A=\cup B_n$, it follows from $\sigma$-additivity that  

        \[
        \mu[A]=\sum \mu[B_n]=\sup \sum_{1\leq k\leq n}\mu[B_k]=\sup \mu[\cup_{1\leq k\leq n}B_k]=\sup \mu[A_n]
        \]

    - **Lower semi-continuity implies upper semi-continuity:**  
        Let $(A_n)$ be a decreasing sequence of elements in $\mathcal{R}$ such that $A=\cap A_n$ is in $\mathcal{R}$.
        It follows that $B_n=A_1\setminus A_n$ defines an increasing sequence such that $B=\cup B_n=A_1\setminus \cap A_n=A_1\setminus A \in \mathcal{R}$.
        Lower semi-continuity, additivity, and the properties of Lemma [lem-propcontentsemiring] imply that

        \[
          \mu[A_1]-\inf \mu[A_n]=\sup (\mu[A_1]-\mu[A_n])=\sup \mu[A_1\setminus A_n]=\mu[\cup A_1\setminus A_n]=\mu[A_1]-\mu[A]
        \]

    - **Upper semi-continuity implies continuity at $\emptyset$** (immediate).
    - **Continuity at $\emptyset$ implies $\sigma$-additivity:**
        Let $(A_n)$ be a sequence of mutually disjoint elements of $\mathcal{R}$ such that $A=\cup A_n$ is in $\mathcal{R}$.
        By means of [Lemma](022-semi-ring-to-ring.md#lem-propcontentsemiring), it follows that  

        \[
          \sum \mu[A_n]\leq \mu[A]
        \]

        It follows that $B_n=A\setminus (\cup_{1\leq k\leq n}A_k)$ is a decreasing family of elements of $\mathcal{R}$ such that $\cap B_n=\emptyset$.
        By additivity of $\mu$, we have

        \[
        \mu[A]=\mu[B_n\cup (\cup_{1\leq k\leq n}A_k)]=\mu[B_n]+\sum_{1\leq k\leq n}\mu[A_k]
        \]

        for every $n$.
        Since $\sum_{q\leq k\leq n}\mu[A_k]\to \sum \mu[A_n]$ and by continuity at $\emptyset$, $\mu[B_n]\to 0$, it follows that $\mu[A]=\sum \mu[A_n]$, hence the $\sigma$-additivity.



We are now in position to formulate the central extension theorem of Carathéodory.


<span id="thm-caratheodory"></span>
!!! theorem "Theorem: Carathéodory's Extension Theorem"

    Let $X$ be a non-empty set, $\mathcal{S}$ a semi-ring such that $X=\cup A_n$ for some countable family $(A_n)$ of elements in $\mathcal{S}$.
    Suppose that $\mu:\mathcal{R}\to [0,\infty]$ is a pre-measure such that:

    1. $\mu[A_n]<\infty$ for every $n$.
    2. $\mu$ is $\sigma$-sub-additive or equivalently $\sigma$-additive.

    Then $\mu$ can be uniquely extended to a measure $\nu$ on $\mathcal{F}=\sigma(\mathcal{S})$.

!!! remark

    We already know from the assumption of this theorem that according to a previous [proposition](022-semi-ring-to-ring.md#prop-pre-mes-semi-ring-to-ring) there exists a unique extension $\nu$ to the ring $\mathcal{R}$ generated by $\mathcal{S}$ such that $\nu$ is a $\sigma$-additive content.
    We can therefore assume for the proof of Carathéodory's theorem that $\mu$ is a $\sigma$-additive content on a ring.

The existence is the complex and lengthy part of the proof.
However uniqueness can be adressed through the following proposition.

!!! proposition
    Let $(X,\mathcal{F})$ be a measurable space and $\mathcal{P}$ a $\pi$-system on $X$ that generates $\mathcal{F}$ and such that there exists a sequence $(A_n)$ of elements of $\mathcal{P}$ with $\cup A_n=X$.
    Let $\mu$ and $\nu$ be two measures on $\mathcal{F}$ that coincide on $\mathcal{P}$ and such that $\mu(A_n)=\nu(A_n)<\infty$ for every $n$.
    Then $\mu=\nu$.

!!! proof
    Let $n$ be an integer and consider the collection of sets $\mathcal{C}^n=\{A \in \mathcal{F}\colon \mu[A\cap A_n]=\nu[A\cap A_n]\}$.
    Then $\mathcal{C}^n$ is a $\lambda$-system.
    Indeed

    - **$X$ is in $\mathcal{C}^n$** since $\mu[X\cap A_n]=\mu[A_n]=\nu[A_n]=\nu[A_n\cap X]$.
    - **Stability under relative complements:** For $A\subseteq B$ with $A$ and $B$ in $\mathcal{C}^n$, it holds that $\mu[(B\setminus A)\cap A_n]=\mu[B\cap A_n]-\mu[A\cap A_n]=\nu[B\cap A_n]-\nu[A\cap A_n]=\nu[(B\setminus A)\cap A_n]$, showing that $B\setminus A$ belongs to $\mathcal{C}^n$.
    - **Stability under countable disjoint unions:** If $(B_m)$ is a disjoint sequence in $\mathcal{C}^n$, then

        \[
        \mu[(\cup B_m) \cap A_n]=\sum_m \mu[B_m\cap A_n]=\sum_m \nu[B_m\cap A_n]=\nu[(\cup B_m)\cap A_n]
        \]

        showing that $\cup B_m \in \mathcal{C}^n$.  

    Since $\mathcal{P}\subseteq \mathcal{C}^n$, and $\mathcal{P}$ is stable under intersection, by means of the Dynkin Lemma, it follows that $\mathcal{F}=\sigma(\mathcal{P})\subseteq \mathcal{C}^n\subseteq \mathcal{F}$.
    Thus, $\mu=\nu$.  

!!! example "Example: Lebesgue/Stieljes Measure"

    The conditions of [Carathéodory's Theorem](#thm-caratheodory) are fulfilled in the case of the Lebesgue/Stieltjes measure.
    Therefore, it defines a unique measure on the Borel $\sigma$-algebra of $\mathbb{R}$.


We are left to show Carathéodory's extension theorem.
The proof relies on the concept of outer measure.
So far we tried to built measures from the bottom up, from simple class of sets and trying to reach $\sigma$-algebra.
The idea of outer measure is a top down approach hopping that both concepts would meet at the right place, that is, the $\sigma$-algebra.

## Outer Measure

!!! definition "Definition: Outer Measure"

    A set function $\mu^\ast \colon 2^X \to [0, \infty]$ is called an **outer measure** if

    * $\mu^\ast[\emptyset] = 0$;
    * **$\sigma$-sub-additivity**: For any countable family $(B_n)$ of subsets of $X$ and $A \subseteq \cup B_n$ it holds

        \[
          \mu^\ast[A] \leq \sum \mu^\ast[B_n]
        \]

    A set $A\subseteq X$ is called **$\mu^\ast$-measurable** if 

    \[
      \mu^\ast[E] = \mu^\ast\left[ E\cap A \right] + \mu^\ast \left[ E\cap A^c \right]
    \]

    for every $E\subseteq X$.

Note that the second condition implies that an outer measure is monotone, that is $\mu[A] \leq \mu[B]$ for any $A\subseteq B$.
The notion of $\mu^\ast$-measurability of a set depends naturally of the outer measure.
Clearly, due to subadditivity, for any subsets $E$ and $A$ of $X$ it holds

\[
\mu^\ast[E] \leq \mu^\ast[E \cap A] + \mu^\ast[E\cap A^c]
\]

Hence, $A$ is $\mu^\ast$-measurable if the reverse inequality holds for any set $E\subseteq X$.
The denomination *measurable* is justified by the following theorem.

!!! theorem

    Let $\mu^\ast$ be an outer measure on $X$.
    Then, the collection $\mathcal{M}$ of all $\mu^\ast$-measurable is a $\sigma$-algebra.
    Furthermore, the restriction of $\mu^\ast$ on this collection is a measure.

!!! proof

    We show that $\mathcal{M}$ is a $\sigma$-algebra.

    **Step 1 - $\emptyset$ belongs to $\mathcal{M}$**: Clearly, $\emptyset$ is obviously $\mu^\ast$ measurable.

    **Step 2 - Stability under complementation**: For $A$ in $\mathcal{M}$, then for any $E \subseteq X$ it holds that

    \[
          \mu^*(E) = \mu^*(E \cap A) + \mu^*(E \cap A^c).
    \]

    Interchanging $A$ and $A^c$ yields $A^c$ belongs to $\mathcal{M}$.

    **Step 3 - Stability under union**: Let $A$ and $B$ be two $\mu^\ast$-measurable sets.
    For any set $E$ it holds

    \[
        \mu^\ast[E] = \mu^\ast[E \cap A] + \mu^\ast[E \cap A^c]
    \]

    In particular for $B$ it holds

    \[
          \mu^\ast[E\cap A^c] = \mu^\ast[(E\cap A^c) \cap B] + \mu^\ast[(E\cap A^c) \cap B^c]
    \]

    Since by sub-additivity it holds that $\mu^\ast[E\cap(A\cup B)] \leq \mu^\ast[E \cap A] + \mu^\ast[E\cap(A^c \cap B)]$.
    Hence, it holds that

    \[
      \begin{align*}
        \mu^\ast[E] & =  \mu^*(E \cap A) + \mu^\ast[(E\cap A^c) \cap B] + \mu^\ast[(E\cap A^c) \cap B^c]\\
                    & = \mu^*(E \cap A) + \mu^\ast[(E\cap A^c) \cap B] + \mu^\ast[(E\cap (A\cup B)^c]\\
                    & \geq \mu^\ast[E\cap (A\cup B)] + \mu^\ast[E\cap (A\cup B)^c] 
      \end{align*}
    \]

    showing that $A\cup B$ is $\mu^\ast$-measurable.

    In particular $\mathcal{M}$ is a ring.

    **Step 4 - stability under countable union**: 
    Since $\mathcal{M}$ is a ring, it is enough to show that $\cup A_n$ is $\mu^\ast$-measurable for any countable family $(A_n)$ of pairwise disjoints $\mu^\ast$-measurable sets.
    Let $B_n =\cup_{k\leq n} A_k$ which is measurable for each $n$.
    By induction, it holds that $\mu^\ast[E\cap B_n] = \sum_{k\leq n} \mu^\ast[E\cap A_k]$ for any set $E\subseteq X$.
    Indeed $B_n$ is $\mu^\ast$-measurable and $\mu^\ast[E \cap B_{n+1}] = \mu^\ast[E\cap B_{n+1}\cap B_n ] + \mu^\ast[E \cap B_{n+1}\cap B_n^c] = \mu^\ast[E\cap B_n] + \mu^\ast[E\cap A_{n+1}]$.
    By monotonicity, it also holds that

    \[

    \]
 
!!! proof "Proof of Carathéodory's Extension Theorem"

    **Step 1: Definition of the Outer Measure**  
    Define the outer measure $\mu^*$ on the power set $2^X$ by

    \[
      \mu^*(A) = \inf \left\{ \sum_{n} \mu(A_n) \colon A \subseteq \cup A_n \text{ where }A_n \text{ is in } \mathcal{S} \right\}.
    \]

    This function $\mu^*$ is well-defined since the semi-ring $\mathcal{S}$ covers $X$ by countable elements $(A_n)$ and $\mu(A_n)<\infty$.

    **Step 2: Carathéodory’s Criterion for Measurability**  
    Define the class of sets

    \[
      \mathcal{M} := \{A \subseteq X \colon \mu^*(E) = \mu^*(E \cap A) + \mu^*(E \cap A^c) \text{ for all } E \subseteq X \}.
    \]

    We show that $\mathcal{M}$ is a $\sigma$-algebra.

    - **$X$ is in $\mathcal{M}$:** For any $E \subseteq X$, we trivially have

        \[
        \mu^*(E) = \mu^*(E \cap X) + \mu^*(E \cap \emptyset),
        \]

        showing that $X$ belongs to $\mathcal{M}$.

    - **Stability under complementation:** For $A$ in $\mathcal{M}$, then for any $E \subseteq X$ it holds that

        \[
          \mu^*(E) = \mu^*(E \cap A) + \mu^*(E \cap A^c).
        \]

        Interchanging $A$ and $A^c$ yields $A^c$ belongs to $\mathcal{M}$.

    - **Stability under countable unions:** Let $(A_n)$ be a sequence in $\mathcal{M}$ and define $A = \cup A_n$.
        We need to show that $A \in \mathcal{M}$, that is, for any $E \subseteq X$ it holds

        \[
        \mu^*(E) = \mu^*(E \cap A) + \mu^*(E \cap A^c).
        \]

        By sub-additivity of $\mu^*$,

        \[
        \mu^*(E \cap A) \leq \sum_n \mu^*(E \cap A_n).
        \]

      Since each $A_n \in \mathcal{M}$, we have

      \[
      \mu^*(E \cap A_n) = \mu^*(E \cap A_n \cap A) + \mu^*(E \cap A_n \cap A^c).
      \]

      Summing over $n$ and using sub-additivity, we obtain

      \[
      \mu^*(E \cap A) + \mu^*(E \cap A^c) = \sum_n \mu^*(E \cap A_n) + \mu^*(E \cap A^c) \geq \mu^*(E).
      \]

      The reverse inequality follows from monotonicity, proving that $\mathcal{M}$ is a $\sigma$-algebra.

    **Step 3: Restriction of $\mu^*$ to $\mathcal{M}$**  
    Define $\nu = \mu^* |_{\mathcal{M}}$. We show that $\nu$ is a measure.

    - **Countable additivity:** If $(A_n)$ is a disjoint sequence in $\mathcal{M}$, then

      \[
      \nu\left(\cup A_n\right) = \mu^*\left(\cup A_n\right).
      \]

      By definition of $\mathcal{M}$, we obtain

      \[
      \mu^*\left(\cup A_n\right) = \sum_n \mu^*(A_n) = \sum_n \nu(A_n).
      \]

      Hence, $\nu$ is a measure.

    **Step 4: Uniqueness of the Extension**  
    Suppose there exists another measure $\tilde{\nu}$ on $\sigma(\mathcal{S})$ that extends $\mu$. Since $\mu^*$ is the smallest possible extension, we must have $\tilde{\nu} \geq \mu^*$.  
    However, by construction, $\nu = \mu^* |_{\mathcal{M}}$ satisfies $\tilde{\nu} = \mu^*$ on $\mathcal{M}$, proving uniqueness.




To extend the proof for stability under countable unions, we need to show that if $(A_n)_{n \in \mathbb{N}}$ is a sequence in $\mathcal{M}$, then their union $A = \cup_{n} A_n$ is also in $\mathcal{M}$. That is, for every subset $E \subseteq X$, we must prove:

\[
\mu^*(E) = \mu^*(E \cap A) + \mu^*(E \cap A^c).
\]

## Why is $\mu^*$ Sub-Additive?
The outer measure $\mu^*$ is defined as:

\[
\mu^*(A) = \inf \left\{ \sum_{n} \mu(A_n) \colon A \subseteq \cup A_n, A_n \in \mathcal{S} \right\}.
\]

To show sub-additivity, take any two sets $A, B \subseteq X$. By definition, for any $\varepsilon > 0$, we can find countable coverings $\{A_n\}, \{B_m\} \subseteq \mathcal{S}$ such that:

\[
A \subseteq \bigcup_{n} A_n, \quad B \subseteq \bigcup_{m} B_m, \quad \text{and} \quad \sum_n \mu(A_n) < \mu^*(A) + \varepsilon/2, \quad \sum_m \mu(B_m) < \mu^*(B) + \varepsilon/2.
\]

Since $A \cup B \subseteq \bigcup_n A_n \cup \bigcup_m B_m$, the countable collection $\{A_n, B_m\}$ forms a covering for $A \cup B$. Therefore,

\[
\mu^*(A \cup B) \leq \sum_n \mu(A_n) + \sum_m \mu(B_m) < \mu^*(A) + \mu^*(B) + \varepsilon.
\]

Since $\varepsilon$ was arbitrary, we obtain

\[
\mu^*(A \cup B) \leq \mu^*(A) + \mu^*(B).
\]

This generalizes to countable unions by applying the same reasoning iteratively, proving that $\mu^*$ is sub-additive.

## Extending the Proof for Stability under Countable Union
We now show that if each $A_n \in \mathcal{M}$, then $A = \cup A_n \in \mathcal{M}$. That is, for all $E \subseteq X$,

\[
\mu^*(E) = \mu^*(E \cap A) + \mu^*(E \cap A^c).
\]

### Step 1: Upper Bound
Since $E = (E \cap A) \cup (E \cap A^c)$, by the sub-additivity of $\mu^*$,

\[
\mu^*(E) \leq \mu^*(E \cap A) + \mu^*(E \cap A^c).
\]

### Step 2: Lower Bound
Since $A_n \in \mathcal{M}$, we know for each $n$,

\[
\mu^*(E \cap A_n) + \mu^*(E \cap A_n^c) = \mu^*(E).
\]

Taking the limit as $n \to \infty$, we observe that:

- Since $A = \cup A_n$, we have $E \cap A = \cup_n (E \cap A_n)$.
- Since $\mu^*$ is monotone and countably sub-additive,

  \[
  \mu^*(E \cap A) \leq \sum_n \mu^*(E \cap A_n).
  \]

  However, we also have:

  \[
  \sum_n \mu^*(E \cap A_n) = \mu^*(E) - \lim_n \mu^*(E \cap A_n^c).
  \]

  By the continuity property $\mu^*(E \cap A_n^c) \to \mu^*(E \cap A^c)$, we obtain:

  \[
  \mu^*(E \cap A) + \mu^*(E \cap A^c) = \mu^*(E).
  \]

Thus, we conclude that $A \in \mathcal{M}$, completing the proof.

