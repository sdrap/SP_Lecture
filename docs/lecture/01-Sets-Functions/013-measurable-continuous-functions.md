# Measurable/Continuous Functions, Initial-Product $\sigma$-Algebra/Topology
The following subsection deals with the consequence of the [properties of preimages](011-sets.md#prop-preimage).
Generically, it works as follows.
Let $f\colon X\to Y$ be a function and $\mathcal{C}$ be a collection of subsets of $Y$ that is stable under intersection, union, or complement.
Then, by [Pre-image Proposition](011-sets.md#prop-preimage), the collection $\{f^{-1}(B)\colon B\in \mathcal{C}\}$ inherits the same stability properties.
This is why measurability, as well as continuity, is defined in terms of preimages.

For ease of notation, given a collection $\mathcal{C}$ of subsets of $Y$, we use the notation

\[
\begin{equation}
    f^{-1}(\mathcal{C})=\{f^{-1}(B)\colon B\in \mathcal{C}\}.
\end{equation}
\]

Also, in probability theory, we use the following shorthand notation

\[
\begin{equation}
    \left\{ f \in A \right\}:=f^{-1}(A)=\left\{ x\in X\colon f(x)\in A \right\}.
\end{equation}
\]

If $Y=\mathbb{R}$, we also use the notations

\[
\begin{equation}
    \left\{ f\leq t \right\}:=f^{-1}\left( (-\infty,t] \right), \quad \left\{ s < f \leq t \right\}:=f^{-1}\left((s,t]\right), \quad \text{etc.}
\end{equation}
\]

!!! definition "Definition: Measurability/Continuity"

    Let $(X,\mathcal{F})$ and $(Y, \mathcal{G})$ be two measurable spaces.
    We say that a function $f:X\to Y$ is $\mathcal{F}$-$\mathcal{G}$-**measurable** if

    \[
    \begin{equation}
        f^{-1}(B) \in \mathcal{F}, \quad\text{for every measurable set }B \in \mathcal{G}.
    \end{equation}
    \]

    In other words, if and only if $f^{-1}(\mathcal{G})\subseteq \mathcal{F}$.

    -------

    Let $(X,\mathfrak{S})$ and $(Y,\mathfrak{T})$ be two topological spaces.
    We say that a function $f:X\to Y$ is $\mathfrak{S}$-$\mathfrak{T}$-**continuous** if

    \[
    \begin{equation}
        f^{-1}(O) \in \mathfrak{S}, \quad\text{for every open set } O\in \mathfrak{T}.
    \end{equation}
    \]

    In other words, if and only if $f^{-1}(\mathfrak{T})\subseteq \mathfrak{S}$.

!!! lemma "Lemma"
    The composition of measurable/continuous functions is measurable/continuous, respectively.

??? proof "Proof"
    We only prove that the composition of measurable functions is measurable, the continuous case being similar.
    Let $(X,\mathcal{F})$, $(Y,\mathcal{G})$, and $(Z,\mathcal{H})$ be three measurable spaces and $f\colon X\to Y$ and $g\colon Y\to Z$ be two measurable functions and denote $h=g\circ f$.
    For every $C\in \mathcal{H}$, it holds that

    \[
    \begin{equation}
      h^{-1}(C)=f^{-1}(g^{-1}(C))=f^{-1}(B) \quad \text{where } B=g^{-1}(C).
    \end{equation}
    \]

    Since $g$ is measurable, it follows that $B=g^{-1}(C)\in \mathcal{G}$.
    Further, the measurability of $f$ implies that $h^{-1}(C)=f^{-1}(B)\in \mathcal{F}$ showing that $h$ is measurable.

!!! lemma "Lemma"
    Let $f \colon X\to Y$ be a function.  

    - If $(Y,\mathcal{G})$ is a measurable space, then $f^{-1}(\mathcal{G})=\{f^{-1}(B)\colon B \in \mathcal{G}\}$ is a $\sigma$-algebra called the *$\sigma$-algebra generated by* $f$ and denoted by $\sigma(f)$.  
    - If $(Y,\mathfrak{T})$ is a topological space, then $f^{-1}(\mathfrak{T})=\{f^{-1}(O)\colon O\in \mathfrak{T}\}$ is a topology called the *topology generated by* $f$ and denoted by $\mathfrak{t}(f)$.  

??? proof "Proof"
    The proof is a straightforward application of [Pre-image Proposition](011-sets.md#prop-preimage).

If $f\colon X\to Y$ is an $\mathcal{F}$-$\mathcal{G}$-measurable function where $\mathcal{F}$ is a $\sigma$-algebra on $X$, then it follows that $\sigma(f)\subseteq \mathcal{F}$.
In other words, $\sigma(f)$ is the smallest $\sigma$-algebra for which $f$ is measurable.
The same remark holds for continuous functions: $\mathfrak{t}(f)$ is the smallest topology for which $f$ is continuous.
More generally, let $(f_i)$ be a family of functions $f_i\colon X \to Y_i$ where $(Y_i,\mathcal{G}_i)$ is a family of measurable spaces.
Then,

\[
\begin{equation}
    \sigma(f_i\colon i)=\sigma(\{f_i^{-1}(B)\colon B\in \mathcal{G}_i, i\})
\end{equation}
\]

is the smallest $\sigma$-algebra such that each $f_i$ is measurable.
Similarly, when replacing $\sigma$-algebra with topologies, the same holds.
These are called the *initial* $\sigma$-algebra or topology.

!!! definition "Definition: Product $\sigma$-algebra"
    Let $(X_i,\mathcal{F}_i)$ be a non-empty family of measurable spaces.
    The *product* $\sigma$-algebra, denoted by $\otimes \mathcal{F}_i$ on the product state space $X =\prod X_i$, is defined as the $\sigma$-algebra generated by the family of projections:

    \[
    \begin{align}
        \pi_i\colon X &\longrightarrow X_i, \\
        x=(x_i)&\longmapsto x_i.
    \end{align}
    \]

    That is,

    \[
    \begin{equation}
        \otimes \mathcal{F}_i =\sigma\left(\left\{ \pi^{-1}_i(A_i)\colon A_i\in \mathcal{F}_i, \text{ for any }i \right\}\right).
    \end{equation}
    \]

!!! exercice

    In two dimensions, let $(X,\mathcal{F})$ and $(Y,\mathcal{G})$ be two measurable spaces, and define the projections:

    \[
    \begin{align}
        \pi_1 \colon  X\times Y &\longrightarrow X, & \pi_2\colon  X\times Y & \longrightarrow Y, \\
        (x,y)&\longmapsto \pi_1((x,y))=x, & (x,y)&\longmapsto \pi_2((x,y))=y.
    \end{align}
    \]

    In particular, for $A$ in $\mathcal{F}$ and $B$ in $\mathcal{G}$, one has:

    \[
    \begin{equation}
        \begin{split}
            \pi^{-1}_1(A)&=\left\{ (x,y)\colon \pi_1((x,y))=x \in A \right\}=A\times Y, \\
            \pi^{-1}_2(B)&=\left\{ (x,y)\colon \pi_2((x,y))=y \in B \right\}=X\times B.
        \end{split}
    \end{equation}
    \]

    It follows that:

    \[
    \begin{equation}
        \mathcal{F}\otimes \mathcal{G}=\sigma\left(\left\{ A\times Y, X\times B\colon A \in \mathcal{F}, B \in \mathcal{G} \right\}\right).
    \end{equation}
    \]

    As an exercise, show that:

    \[
    \begin{equation}
        \mathcal{F}\otimes \mathcal{G}=\sigma\left(\left\{A\times B\colon A\in \mathcal{F}, B\in \mathcal{G}\right\}\right).
    \end{equation}
    \]

Topologies and $\sigma$-algebras are often complex abstract systems of sets.
In practical terms, checking continuity or measurability for a function might, at first sight, seem like an impossible task.
However, topologies and $\sigma$-algebras are often described in terms of a simple collection of sets from which they are generated.
The morphism properties of pre-images allows us to restrict the verification of continuity or measurability to this simpler generating set.


!!! proposition "Proposition"
    Let $f:X\to Y$ be a function and $\mathcal{C}$, $\mathfrak{C}$ be collections of subsets of $Y$.
    It follows that

    \[
    \begin{equation}
        \sigma(f)=f^{-1}\left(\sigma(\mathcal{C})\right)=\sigma\left( f^{-1}(\mathcal{C})\right)=\sigma\left(\left\{ f^{-1}(B)\colon B \in \mathcal{C} \right\} \right).
    \end{equation}
    \]

    and

    \[
    \begin{equation}
        \mathfrak{t}(f)=f^{-1}\left(\mathfrak{t}(\mathfrak{C})\right)=\mathfrak{t}\left( f^{-1}(\mathfrak{C})\right)=\mathfrak{t}\left(\left\{ f^{-1}(B)\colon B \in \mathfrak{C} \right\} \right).
    \end{equation}
    \]

!!! proof "Proof"
    Left as an exercise.

!!! remark "Remark"
    The use of this proposition is often as follows.
    Let $f:X\to Y$ be a function where $(X,\mathcal{F})$ and $(Y,\mathcal{G})$ are measurable spaces.
    Suppose that $\mathcal{G}=\sigma(\mathcal{C})$ for some collection $\mathcal{C}$ of subsets of $Y$.
    It follows that $f$ is measurable if and only if

    \[
    \begin{equation}
        f^{-1}(B)\in \mathcal{F}, \quad \text{ for every }B\in \mathcal{C}.
    \end{equation}
    \]

    In particular, if $Y=\mathbb{R}$ and $\mathcal{G}=\mathcal{B}(\mathbb{R})$ is the Borel $\sigma$-algebra of $\mathbb{R}$, then $f$ is measurable if and only if  

    \[
    \begin{equation}
        \{f\leq t\} \in \mathcal{F}
    \end{equation}
    \]

    for every $t \in \mathbb{R}$.


!!! corollary
    Let $(X,\mathcal{F})$ be a measurable space and $(Y,\mathfrak{T})$ be a topological space.
    A function $f \colon X \to Y$ is measurable with respect to the $\sigma$-algebra if $f^{-1}(O)$ is measurable for any open set $O$.

    Furthermore, if the topology is generated by a countable basis $\mathfrak{B}$, we can consider only those $O$ in the topological basis.

    In particular if $X$ and $Y$ are topological spaces endowed with their respective $\sigma$-algebra, if $f$ is continuous then it is measurable.
    
    Finally, if $Y = \mathbb{R}$ and $f$ is lower/upper semi-continuous if follows that $f$ is measurable.


!!! proof "Proof"
    The first assertion is a direct consequence of the previous results, the seond one follows from the fact that every open set $O$ can be written as a countable union of elements in $\mathfrak{B}$.

    As for the third one, it follows from $f^{-1}(O)$ is open henceforth measurable for any open set $O$.

    As for the last one it follows from $f^{-1}(]-\infty, t])$ is closed for any $t$ henceforth measurable.


!!! proposition

    Let $f,g, f_n\colon X\to \mathbb{R}$ be measurable functions where $(X,\mathcal{F})$ is a measurable space.
    It holds that:
    
    - $af+bg$ is measurable for every $a,b \in \mathbb{R}$.
    - $fg$ is measurable.
    - $\max(f,g)$ and $\min(f,g)$ are measurable.
    - $\sup f_n$ and $\inf g_n$ are extended real-valued measurable functions.(1)
        {.annotate}
      
        1. With respect to the Borel $\sigma$-algebra on $[-\infty,\infty]$ generated by the metric $d(x,y)=|\arctan(x)-\arctan(y)|$, which coincides with the Euclidean topology on $\mathbb{R}$.
    - $\liminf f_n:=\inf_n\sup_{k\geq n}f_k$ and $\limsup f_n:=\inf_n\sup_{k\geq n}f_k$ are extended real-valued measurable functions.
    - $A:=\{\lim f_n \text{ exists}\}:=\{\omega \colon \lim f_n(\omega)\text{ exists}\}=\{\liminf f_n=\limsup f_n\}$ is measurable.


!!! proof "Proof"
    First, let $\varphi:\mathbb{R}\times \mathbb{R}\to \mathbb{R}$ be a continuous function.
    It follows that the function $\varphi(f,g)$ is measurable for the following reason.
    First, the mapping $T:x \to \mathbb{R}\times \mathbb{R}$, $x \mapsto (f(x),g(x))$ is measurable with respect to the product Borel $\sigma$-algebra on $\mathbb{R}\times \mathbb{R}$.
    Indeed, for every two Borel sets $A, B$ of the real line, it follows that

    \[
    T^{-1}(A\times B)=\{f\in A\}\cap\{g\in B\}
    \]

    which is an element in $\mathcal{F}$ by the measurability of $f$ and $g$.
    Since the product sets $A\times B$ for $A,B$ Borel sets in $\mathbb{R}$ generate the Borel product $\sigma$-algebra on $\mathbb{R}^2$, it follows that $T$ is measurable.
    By continuity of $\varphi$, it follows that $\varphi$ is measurable, and therefore $\varphi\circ T$ is measurable.
    Taking $\varphi(x,y)=ax+by$, $\varphi(x,y)=xy$, $\varphi(x,y)=\max(x,y)$, and $\varphi(x,y)=\min(x,y)$, the first three points follow.

    Let $a \in \mathbb{R}$. It holds that

    \[
    \{\sup_n f_n \leq a\}=\{f_n\leq a\colon \text{ for every }n\}=\cap_n \{f_n\leq a\}
    \]

    which is measurable since $\{f_n\leq a\}$ is measurable.
    Since $(-\infty,a]$ generates the Borel $\sigma$-algebra, it follows that $\sup_n f_n$ is measurable.
    The same argument applies to $\inf f_n$ using $\{\inf f_n\geq a\}$.
    
    The measurability of $\liminf f_n$ follows by the same argument using countable intersection and union.
    The last point follows directly.

